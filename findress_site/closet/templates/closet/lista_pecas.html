{% extends 'closet/base.html' %}

{% block title %}
  {% if busca %}
    Resultados para {{ busca }}
  {% else %}
    Meu Closet
  {% endif %}
{% endblock %}

{% block content %}
  
  <div class="page-header">
    {% if busca %}
      <h1>Exibindo resultados para: "{{ busca }}"</h1>
    {% else %}
      <h1>Todas as Peças do Closet</h1>
    {% endif %}
  </div>
  
  <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
    <thead>
        <tr style="background-color: #f8f9fa; text-align: left;">
            <!-- Nova Coluna de Cabeçalho -->
            <th style="padding: 12px; border-bottom: 2px solid #dee2e6;">Foto</th>
            <th style="padding: 12px; border-bottom: 2px solid #dee2e6;">Nome da Peça</th>
            <th style="padding: 12px; border-bottom: 2px solid #dee2e6;">Categoria</th>
            <th style="padding: 12px; border-bottom: 2px solid #dee2e6;">Cor</th>
            <th style="padding: 12px; border-bottom: 2px solid #dee2e6;">Tamanho</th>
        </tr>
    </thead>
    <tbody>
        {% for peca in pecas %}
          <tr style="border-bottom: 1px solid #dee2e6;">
            
            <!-- Nova Coluna de Imagem -->
            <td style="padding: 12px;">
                {% if peca.imagem %}
                    <!-- Exibe a imagem se existir -->
                    <img src="{{ peca.imagem.url }}" alt="{{ peca.nome_peca }}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd;">
                {% else %}
                    <!-- Mostra um texto ou ícone se não tiver imagem -->
                    <span style="color: #999; font-size: 0.9em;">Sem foto</span>
                {% endif %}
            </td>

            <td style="padding: 12px;"><strong>{{ peca.nome_peca }}</strong></td>
            <td style="padding: 12px;">{{ peca.categoria }}</td>
            <td style="padding: 12px;">
                <!-- Pequena bolinha de cor (opcional, visualmente agradável) -->
                <span style="display:inline-block; width: 10px; height: 10px; border-radius: 50%; background-color: grey; margin-right: 5px;"></span>
                {{ peca.cor }}
            </td>
            <td style="padding: 12px;">
                <span style="background-color: #e9ecef; padding: 4px 8px; border-radius: 4px; font-weight: bold;">{{ peca.tamanho }}</span>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" style="padding: 30px; text-align: center;">
              <div class="empty-message">
                {% if busca %}
                  <p>Nenhuma peça encontrada com o termo "{{ busca }}".</p>
                {% else %}
                  <p>Seu closet está vazio.</p>
                  <a href="/admin/" class="cta-button" style="display: inline-block; margin-top: 10px; padding: 8px 16px; background-color: var(--lilac-primary); color: white; text-decoration: none; border-radius: 4px;">Adicionar Peça no Admin</a>
                {% endif %}
              </div>
            </td>
          </tr>
        {% endfor %}
    </tbody>
  </table>

{% endblock %}